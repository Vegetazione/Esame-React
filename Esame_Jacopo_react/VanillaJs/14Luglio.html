<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Esame ex1</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <!-- html -->
    <div id="login" class="flex flex-col items-center h-screen w-full justify-center bg-slate-200 " >
        <label class="font-sans font-2xl bg-red-500 p-3 rounded-md my-10 text-zinc-50 font-bold">Username:</label>
        <input  class="hover:bg-slate-400 p-4 rounded-md" type="text" id="username">
        <br><br>
        <label class="font-sans font-2xl bg-sky-500 p-3 rounded-md my-10  text-zinc-50 font-bold">Password:</label>
        <input class="hover:bg-slate-400 p-4 rounded-md" type="password" id="password">
        <br><br>
        <button class="font-sans font-2xl bg-emerald-500 p-5 rounded-md my-10 text-zinc-50 font-bold hover:bg-emerald-700 cursor-pointer shadow-black shadow-md" id="btn">Login</button>
    </div>
      
    <div id="admin_view" class="flex flex-col items-center  h-screen w-full justify-center bg-slate-200 " style="display:none">
        
            <img class="m-auto p-10" src="https://phoneky.co.uk/thumbs/screensavers/down/abstract/loading_rrexqorz.gif" id="loader" style="display:none">
        
        
        <h2 id="admin_message"></h2>
    </div>

    <script>
        function $(elId) {
            return document.getElementById(elId);
        }

        let login = $("login");
        let btn = $("btn");
        let adminView = $("admin_view");
        let loader = $("loader");
        let adminMessage = $("admin_message");

        const usernameLogin = "eliaspower";
        const passwordLogin = "cicalino";

        let tentativo = 0;
        let maxTentativi = 3;

        btn.addEventListener("click", () => {
            let username = $("username").value;
            let password = $("password").value;
            tentativo++;
            console.log(tentativo);

            //check max tent
            if (tentativo > maxTentativi) {
                login.style.display = "none";
                adminView.style.display = "block";
                adminMessage.innerHTML = "Max tentativi. Riprova piÃ¹ tardi.";
                adminMessage.classList.add("flex", "flex-col", "items-center", "text-center","text-4xl","font-extrabold", "h-screen", "w-full", "justify-center", "bg-slate-200");
            } else {
              
                if (username === usernameLogin && password === passwordLogin) {
                    login.style.display = "none";
                    loader.style.display = "block";
                    adminView.style.display = "block";

                    adminMessage.innerText = "Stiamo effettuando il Login...";
                    adminMessage.classList.add("flex", "flex-col", "items-center", "text-center","text-4xl","font-extrabold");

                    const delay = ms => new Promise(res => setTimeout(res, ms));
                    delay(5000).then(() => {
                       
                        loader.style.display = "none";
                        adminView.style.display = "block";
                        adminMessage.innerText = `Sei loggato ${username}!`;
                        adminMessage.classList.add("flex", "flex-col", "items-center", "text-center","text-4xl","font-extrabold", "h-screen", "w-full", "justify-center", "bg-slate-200");
                    });
                } else {
                    // mostra il messaggio di errore
                    adminMessage.innerText = "Credenziali errate. Riprova.";
                }
            }
        });

    </script>
</body>
</html>